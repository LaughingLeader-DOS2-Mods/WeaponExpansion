Version 1
SubGoalCombiner SGC_AND
INITSECTION
LLWEAPONEX_ToggleSettings_RegisterScripts();
KBSECTION

//REGION UNSHEATHED_FX
PROC
LLWEAPONEX_OnItemTemplateEquipped((CHARACTERGUID)_Char, (ITEMGUID)_Item, (STRING)_Template)
AND
IsTagged(_Item, "LLWEAPONEX_CustomUnsheathedFX", 1)
THEN
DB_LLWEAPONEX_TS_Temp_CustomUnsheathed(_Char, _Item);
LeaderLib_ToggleScripts_EnableScriptForObject(_Char, "LLWEAPONEX_CustomUnsheathedFX", "WeaponExpansion");

PROC
LLWEAPONEX_OnItemTemplateUnEquipped((CHARACTERGUID)_Char, (ITEMGUID)_Item, (STRING)_Template)
AND
DB_LLWEAPONEX_TS_Temp_CustomUnsheathed(_Char, _Item)
THEN
NOT DB_LLWEAPONEX_TS_Temp_CustomUnsheathed(_Char, _Item);
LLWEAPONEX_ToggleSettings_Internal_DisableUnsheathedFX(_Char);

PROC
LLWEAPONEX_ToggleSettings_Internal_DisableUnsheathedFX((CHARACTERGUID)_Char)
AND
NOT DB_LLWEAPONEX_TS_Temp_CustomUnsheathed(_Char, _)
THEN
LeaderLib_ToggleScripts_DisableScriptForObjectAfterDelay(_Char, "LLWEAPONEX_CustomUnsheathedFX", "WeaponExpansion", 250);
//END_REGION

//REGION REGISTER_SCRIPTS
PROC
LLWEAPONEX_ToggleSettings_RegisterScripts()
THEN
LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_10_DemolitionBackpack", "LLWEAPONEX_DemolitionBackpackEquipped", 0);
LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_10_AnvilMace", "LLWEAPONEX_AnvilMaceEquipped", 0);
LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_10_PowerGauntlets", "LLWEAPONEX_PowerGauntletsActive", 0);

LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_12_UnrelentingRage", "LLWEAPONEX_UnrelentingRage_Active", 0);

LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_20_ListenForTurnEnding", "LLWEAPONEX_ListenForTurnEnding", 0, 1);
LeaderLib_ToggleScripts_Register_ObjectScript("LLWEAPONEX_80_TS_20_ListenForStatusRemoval", "LLWEAPONEX_ListenForStatusRemoval", 0, 1);
//END_REGION
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LaughingLeader_WeaponExpansion"